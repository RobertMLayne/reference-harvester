HomeAPIsAPI syntax examples
API syntax examples
Was this page helpful?
To query ODP, you can use simplified or advanced query syntax for more simple or advanced use cases, respectively. The simplified syntax is meant for a “quick start” and may be used by more casual users to have more flexibility in searching the same data available on the searchable Patent File Wrapper user interface. It can be used directly in a web browser or any API usage/testing tool such as Postman. As the name indicates, the focus is on its simplicity, and some more sophisticated search features may not be available. The advanced syntax is slightly more advanced and can be used by query tools such as Postman or in a script.

To use either simplified or advanced syntax, you must first register and obtain an API key. But first, let’s look at some examples of both syntaxes.

Simplified Syntax Examples:
Simplified syntax uses simple query string name/value pairs where the name represents a field you want to match, and the value represents the value you are looking for.

PDF icon View the full simplified syntax documentation

Example 1: Search across multiple fields for anything matching the word "Utility”.

https://api.uspto.gov/api/v1/patent/applications/search?q=Utility

Example 2: Search for invention title including the word "Certification" filed between 2021 and 2022.

https://api.uspto.gov/api/v1/patent/applications/search?q=applicationMetaData.inventionTitle:Apple* AND applicationMetaData.filingDate:[2021-01-01 TO 2022-12-01]&offset=0&limit=25

Advanced Syntax Examples:
The advanced syntax uses the JSON format to provide the field name and its values, and it will allow you to execute many different types of queries for which we provide Swagger documentation.

Our API is powered by Amazon OpenSearch, which allows you to query for the more complex/sophisticated use cases.

Example 1: Search across multiple fields for anything matching the word "Nanobody" for the applications filed between 2022 and 2023.

https://api.uspto.gov/api/v1/patent/applications/search

{
  "q": "Nanobody",
  "filters": [
    {
      "name": "applicationMetaData.applicationTypeLabelName",
      "value": [
        "Utility"
      ]
    }
  ],
  "rangeFilters": [
    {
      "field": "applicationMetaData.filingDate",
      "valueFrom": "2022-01-01",
      "valueTo": "2023-12-31"
    }
  ],
  "pagination": {
    "offset": 0,
    "limit": 25
  },
  "sort": [
    {
      "field": "applicationMetaData.filingDate",
      "order": "Desc"
    }
  ]
}
Example 2: Search for invention title including the word "Nanobody" filed between 2022 and 2023.

https://api.uspto.gov/api/v1/patent/applications/search

{
  "q": "applicationMetaData.invetionTitle:Hair Dryer",
  "filters": [
    {
      "name": "applicationMetaData.applicationTypeLabelName",
      "value": [
        "Design"
      ]
    },
    {
      "name": "applicationMetaData.publicationCategoryBag",
      "value": [
        "Granted/Issued"
      ]
    }
  ],  
  "pagination": {
    "offset": 0,
    "limit": 25
  },
  "sort": [
    {
      "field": "applicationMetaData.filingDate",
      "order": "Desc"
    }
  ],
  "facets": [
    "applicationMetaData.applicationTypeLabelName",
    "applicationMetaData.entityStatusData.businessEntityStatusCategory"
  ]
}
Example 3: ODP Metadata retrieval API that paginates the results and handles HTTP 429 error gracefully (rate limit errors)

To learn about the ODP API Rate Limits, please navigate to the API Rate Limits page.

import requests
import time

SLEEP_AFTER_429 = 0.1
SLEEP_BETWEEN_HTTP = 0
HTTP_RETRY = 10
MAX_RANGE = 10000
LIMIT = 100

api_key = "<YOUR API KEY>"
url = 'https://api.uspto.gov/api/v1/patent/applications/search'
headers = {
    'x-api-key': api_key
}
query_template = {
  "q": None,
  "filters": [
    {
      "name": "applicationMetaData.applicationTypeLabelName",
      "value": ["Utility"]
    },
    {
      "name": "applicationMetaData.publicationCategoryBag",
      "value": ["Pre-Grant Publications - PGPub"]
    },
    {
      "name": "applicationMetaData.applicationStatusDescriptionText",
      "value": ["Non Final Action Mailed"]
    }
  ],
  "rangeFilters": [
    {
      "field": "applicationMetaData.filingDate",
      "valueFrom": "2010-10-01",
      "valueTo": "2023-10-30"
    }
  ],
  "pagination": {
    "offset": 0,
    "limit": LIMIT
  },
  "sort": [
    {
      "field": "applicationMetaData.filingDate",
      "order": "Desc"
    }
  ],
  "fields": ["applicationNumberText","applicationMetaData"]
}

application_numbers_api = []

def make_search_request(offset, retry=0):
    query = query_template.copy()
    query['pagination']['offset'] = offset
    response = requests.post(url, headers=headers, json=query)
    if response.status_code == 200:
        data = response.json()
        return [item['applicationNumberText'] for item in data.get('patentFileWrapperDataBag', [])], None
    elif response.status_code == 429:
        if retry < HTTP_RETRY:
            time.sleep(SLEEP_AFTER_429)
            retry += 1
            return make_search_request(offset, retry)
    return None, response

for offset in range(0, MAX_RANGE, LIMIT):  # adjust range and step as needed
    application_numbers, error_response = make_search_request(offset, 0)
    time.sleep(SLEEP_BETWEEN_HTTP)
    if application_numbers is not None:
        application_numbers_api.extend(application_numbers)
    else:
        print(f"request failed with status code {error_response.status_code} for offset: {offset}")
        print(f"response content: {error_response.content}")
        print(f"url causing the error: {url}")
Example 4: ODP Patent File Wrapper document download API code handles the HTTP 429 gracefully (with rate limit errors). To learn about the ODP API Rate Limits, please navigate to the API Rate Limits page.

Please note that some ODP files are large. You may see a significant delay before the file content starts streaming and we recommend setting your maximum time-out to start generating content at 600 seconds. For example, to download file of 100 MB size, you may see a 60 second delay before you see any content streaming. In rare cases of files larger than 250 MB, ODP may still time out after 10 minutes. If you are unable to download large files, send us a message on our Contact us page.

Additionally, ODP uses an HTTP redirect 301 to provide a direct link to download files. Most software libraries will follow redirect automatically or by adding an extra parameter. For example, in Python requests library, you will need to add a parameter allow_redirects=True. In CURL utility, you can follow redirects by adding a “-L” flag.

Change:

response = requests.get(file_url, headers=headers)
to:

response = requests.get(file_url, headers=headers, allow_redirects=True) 
import requests
import time
import random

SLEEP_AFTER_429 = 0.1
SLEEP_BETWEEN_HTTP = 0
HTTP_RETRY = 5
MAX_FILES = 10
total_429 = 0
total_rate = 0

api_key = "<YOUR API KEY>"
url = 'https://api.uspto.gov/api/v1'
apllication_id = "12345678"
meta_data = f"{url}/patent/applications/{apllication_id}/documents"
pdf_file = f"{url}/download/applications/{apllication_id}/FQ0SPLX2PPOPPY5.pdf"
xml_file = f"{url}/download/applications/{apllication_id}/GNDGBKJYPPOPPY5/xmlarchive"
word_file = f"{url}/download/applications/{apllication_id}/GNDGBKJYPPOPPY5/files/Non-Final%20Rejection.DOC"

headers = {
    'x-api-key': api_key
}

files  = [meta_data, pdf_file, xml_file, word_file]

def make_search_request(file_url, retry=0):
    global total_429
    response = requests.get(file_url, headers=headers)
    if response.status_code == 429 and retry < HTTP_RETRY:
        time.sleep(SLEEP_AFTER_429)
        retry += 1
        total_429 += 1
        print(f"Got HTTP 429. Retry number: {retry}")
        return make_search_request(file_url, retry)
    return response

for count in range(0, MAX_FILES):
    file_url = random.choice(files)
    response = make_search_request(file_url, 0)
    time.sleep(SLEEP_BETWEEN_HTTP)
    if response.status_code == 200:
        print(f"Retrieved {count}: {file_url}")
    else:
        print(f"request failed with status code {response.status_code} for url: {file_url}, {response.content}")
If you have any questions or errors, please visit the Support page for assistance.

